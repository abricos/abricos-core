<!--[*]
[tt=main][/tt]
[mcss=sys]widget.css[/mcss]
[*]-->
<h2>Модуль "Визуальный редактор TinyMCE" - cтраница разработчика</h2>
<h3>№1. Загрузка редактора</h3>
<p>
	<input id="btn_loadTinyMCE" type="button" value="Выполнить API.loadTinyMCE(...)" />
</p>
<p>
	<textarea id="txt1_editor" style="width: 600px; height: 100px;"></textarea>
</p>
<h3>№2. Установка редактора Brick.widget.Editor</h3>
<p>
	<input id="btn_initEditor" type="button" value="API.initEditor(...)" />
	<input id="btn_editorDestroy" type="button" value="editor.destroy()" disabled />
</p>
<p>
	<textarea id="txt2_editor" style="width: 600px; height: 100px;"></textarea>
</p>
<h3>№3. Смена режимов панели инструментов редактора Brick.widget.Editor</h3>
<p>
	<input id="btn3_initEditor" type="button" value="Установить редактор" />
	<input id="btn3_full" type="button" value="TOOLBAR_FULL" disabled />
	<input id="btn3_average" type="button" value="TOOLBAR_STANDART" disabled />
	<input id="btn3_minimal" type="button" value="TOOLBAR_MINIMAL" disabled />
	<input id="btn3_code" type="button" value="MODE_CODE" disabled />
	<input id="btn3_visual" type="button" value="MODE_VISUAL" disabled />
</p>
<p>
	<textarea id="txt3_editor" style="width: 600px; height: 200px;"></textarea>
</p>
<br />

<script>
YAHOO.util.Event.onDOMReady(function () {
	var Y = YAHOO.util;

(function(){
	
	var setText = function(elTextAreaId){
		var elText = document.getElementById('text_for_editor');
		var el = document.getElementById(elTextAreaId);
		if (el){
			el.value = elText.innerHTML;
		}
	};

	setText('txt1_editor');
	setText('txt2_editor');
	setText('txt3_editor');

})();	
//№1. Загрузка редактора
(function(){
	
	Y.Event.addListener("btn_loadTinyMCE", "click", function(){
        
   		Brick.Component.API.fire('tinymce', 'api', 'loadTinyMCE', function(){
   			tinyMCE.init({
				mode : "exact", 
				theme : "advanced", language: "ru", debug: false, 
				plugins : "paste",
				paste_auto_cleanup_on_paste: true,
				cleanup: true,
				theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,bullist,numlist,|,link,unlink,image,code",
				theme_advanced_buttons2 : "", theme_advanced_buttons3 : "", theme_advanced_buttons4 : "",
				paste_auto_cleanup_on_paste : true,
				theme_advanced_toolbar_location : "top",
				theme_advanced_toolbar_align : "left",
				theme_advanced_resizing : true,
				theme_advanced_resize_horizontal : false,
				convert_urls : false
   			});
   			
			tinyMCE.execCommand('mceAddControl', true, 'txt1_editor');
       	});
	});
	
})();
// №2. Установка редактора Brick.widget.Editor
(function(){

	var editor = null;
	var btnNew = document.getElementById('btn_initEditor');
	var btnDest = document.getElementById('btn_editorDestroy');
	
	Y.Event.addListener('btn_initEditor', 'click', function(){
        btnNew.disabled = "disabled";
		var config = {
			'element': 'txt2_editor',
			onSuccess: function(instance){
				editor = instance;
	            btnDest.disabled = "";
			}
		};
       	Brick.Component.API.fire('tinymce', 'api', 'initEditor', config);            
	});

	Y.Event.addListener('btn_editorDestroy', 'click', function(){
		editor.destroy();
        btnNew.disabled = "";
        btnDest.disabled = "disabled";
	});
})();

// №3. Смена режимов панели инструментов редактора Brick.widget.Editor 
(function(){

	var editor = null;
	var btnNew = document.getElementById('btn3_initEditor');
	var btnFull = document.getElementById('btn3_full');
	var btnAverage = document.getElementById('btn3_average');
	var btnMinimal = document.getElementById('btn3_minimal');
	var btnCode = document.getElementById('btn3_code');
	var btnVisual = document.getElementById('btn3_visual');
	
	Y.Event.addListener('btn3_initEditor', 'click', function(){
        btnNew.disabled = "disabled";
		var config = {
			'element': 'txt3_editor',
			onSuccess: function(instance){
				editor = instance;
	            btnFull.disabled = btnAverage.disabled = btnMinimal.disabled = 
		        	btnCode.disabled = btnVisual.disabled = "";
			}
		};
       	Brick.Component.API.fire('tinymce', 'api', 'initEditor', config);            
	});

	Y.Event.addListener('btn3_full', 'click', function(){
		editor.set('toolbar', Brick.widget.Editor.TOOLBAR_FULL);
	});
	Y.Event.addListener('btn3_average', 'click', function(){
		editor.set('toolbar', Brick.widget.Editor.TOOLBAR_STANDART);
	});
	Y.Event.addListener('btn3_minimal', 'click', function(){
		editor.set('toolbar', Brick.widget.Editor.TOOLBAR_MINIMAL);
	});
	Y.Event.addListener('btn3_code', 'click', function(){
		editor.set('mode', Brick.widget.Editor.MODE_CODE);
	});
	Y.Event.addListener('btn3_visual', 'click', function(){
		editor.set('mode', Brick.widget.Editor.MODE_VISUAL);
	});
})();

});
</script>

<div id="text_for_editor" style="display: none">
<h1>Платформа Abricos</h1>
<p>Abricos - это комплексное решение для построения полноценных интернет приложений.</p>
<p>Сайт платформы Abricos - <a href="http://abricos.org">http://abricos.org</a></p>
<p>Документация, исходный код, форум на сайте <a href="http://trac.abricos.org">http://trac.abricos.org</a></p>
</div>